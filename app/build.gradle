apply plugin: 'com.android.application'
//apply plugin: 'newlens'

android {
    compileSdkVersion 23
    buildToolsVersion "23.0.3"

    defaultConfig {
        applicationId "com.appublisher.quizbank"
        minSdkVersion 10
        targetSdkVersion 21
        versionCode 42
        versionName "1.7.1"

        //参数
        manifestPlaceholders = [
                GT_APPID: rootProject.ext.GT_APPID,
        ]
    }

    sourceSets {
        main {
            jniLibs.srcDirs = ['libs']
            res.srcDirs = ['src/main/res', 'src/main/res-offline', 'src/main/res-opencourse']
        }
    }

    // 渠道
    productFlavors {
        other {
            manifestPlaceholders = [APP_NAME   : "天天模考·腰果公务员",
                                    APP_CHANNEL: "other"]
        }
    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'

            applicationVariants.all { variant ->
                variant.outputs.each { output ->
                    def outputFile = output.outputFile
                    if (outputFile != null && outputFile.name.endsWith('.apk')) {
                        //noinspection GroovyAssignabilityCheck
                        def apkFile = new File(
                                output.outputFile.getParent(),
                                "QuizBank_${variant.versionName}" +
                                        "_${variant.flavorName}.apk")
                        output.outputFile = apkFile
                    }
                }
            }
        }
    }
}

repositories {
    flatDir {
        dirs 'libs'
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    compile project(':treeviewlib')
    compile project(':diagramlib')
    compile project(':lib_basic')
    compile project(':lib_login')
    compile project(':lib_pay')
    compile project(':lib_course')
    compile 'org.apmem.tools:layouts:1.8@aar'
    compile 'com.coolerfall:android-http-download-manager:1.5.1'
    compile 'com.liulishuo.filedownloader:library:0.2.0'
    compile 'com.android.support:appcompat-v7:23.4.0'
    // for vip
    compile(name: 'multi-image-selector', ext: 'aar')
    compile 'com.android.support:design:23.2.0'
}
